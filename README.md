6.170 Repo Management
=====================

A set of tools to manage a Github enterprise instance that is setup for a class.

Usage
-----

###Load the python virtualenv

    >> virtualenv env.d
    >> . env.d/bin/activate
    >> pip install -r requirements.txt

To use the scripts, first clone the repository to a local folder on your computer.

###Configuration

To make sure that everything is configured correctly, first open the config.ini file, and fill in your github organization and your github enterprise IP.

###Generating your Authentication Token

To use any of the functions described below, you will need an authenitication token. You can only have one token at any point in time. This token will be stored in a file called token.txt. DO NOT DELETE THIS TXT FILE. If you delete the file, you will need to also delete the key on the github website before you will be able to login to the API. In order to generate this token, you will need to be an admin of whatever organization(class) you are trying to use the scripts for.

    >> ./setupAuth.sh

###Setting up the Assignment Repositories

    >> ./setupRepos.sh <projectName> <studentFile>

Before you can run this command, you will need to have a base assignment repository, as well as a file that contains a list of students. For the assignment repository, make sure that you already have your starter code files in the repository, as this command will clone that repository into the student team repositories.

If you want to have the repositories setup with issues that your students will be able to see, comment on, and close, they need to be setup before you run this command. The issues cannot have any labels on them, nor can they ever have been closed. This command will also copy over pull requests, so it may be easier not to make pull requests to the base assignment repository, as they will also be visible to your students.

For the file that contains a list of students, there should be one team per line. It doesn't matter which order the pairs of github usernames are in, so long as they are separated by whitespace. There can be at most two people on a team. It is also possible for there to be a single person on the team. For this case, just put that person's github username on a line BY ITSELF, so that it would be a singleton.

    //Students File
    mchoi ycai
    ljthomas
    
This command will not work if you do not have an auth token, or you are not an Admin of your organization.

###Collect Student Repositories

    >> ./collectRepos <ProjectName>

Clone all repos beloning to the supplied project_name and store them
in a new subfolder of the ./cloned_repos directory. These repositories are pushable, so you can put a scores.txt file in them, and students will be able to see that if you commit and push while in the cloned repository.

###Removing Repositories

    >> ./cleanup <BaseProject>
    
This command will remove all auto-generated repositories that were created from the files in the Base Repository. This command will not delete the base repository though. If there was an error in the setupRepos process, and you need to start over, you can run this command, and it will destroy all of the autogenerated repositories. It will not destroy any teams that have been auto-generated, and those can be cleaned up more easily by hand.

###References

Most of the code and a good amount of the Documentation comes from the MIT 6170 Web Development Project. Their Repository can be found at https://github.com/hogbait/6170_repo_management

